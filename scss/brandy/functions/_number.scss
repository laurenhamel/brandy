////
/// @group brandy-numbers
////

/// Converts some string representation of a unit to its numeric digit
///
/// @param {string} $unit - Some string representation of a unit
/// @returns {number}
@function unit-to-digit( $unit ){
  
  @if( map-has-key($brandy-units, $unit) ) {
    
    @return map-get($brandy-units, $unit);
    
  }
  
  @return 0;
  
}

/// Converts one numerical unit to another
///
/// @author Hugoe Giraudel
/// @requires {function} is-string
/// @requires {function} str-is-number
/// @requires {function} cast-number
/// @requires {function} is-number
/// @requires {variable} $brandy-units
/// @param {string | number} $value - Some numeric value
/// @returns {number | null}
/// @throws 'Unknown unit `#{$unit}`.'
/// @throws 'Cannot execute `strip-unit` when value `#{$value}` is non-numeric.'
@function convert-unit( $value, $unit ) {
  
  @if( is-string($value) and str-is-number($value) ) { $value: cast-number($value); }
  
  @if( is-number($value) ) {
    
    @if( map-has-key($brandy-units, $unit) ) {
      
      @return map-get($brandy-units, $unit) + $value;
      
    }
    
    @error 'Unknown unit `#{$unit}`.';
    
  }
  
  @warn 'Cannot execute `convert-unit` when value `#{$value}` is non-numeric.';
  
  @return null;
  
}

/// Strips a unit from a numeric value
/// 
/// @requires {function} is-string
/// @requires {function} str-is-number
/// @requires {function} cast-number
/// @requires {function} is-number
/// @param {string | number} $value - Some numeric value
/// @returns {number | null}
/// @throws 'Cannot execute `strip-unit` when value `#{$value}` is non-numeric.'
@function strip-unit( $value ) {
  
  @if( is-string($value) and str-is-number($value) ) { $value: cast-number($value); }
  
  @if( is-number($value) ) {
    
    @if( unitless($value) ) { @return $value; }
    
    @return $value / ($value * 0 + 1);
    
  }
  
  @warn 'Cannot execute `strip-unit` when value `#{$value}` is non-numeric.';
  
  @return null;
  
}

/// Determines if a value is equivalent to a negative number
///
/// @requires {function} is-number
/// @requires {function} is-string
/// @requires {function} unit-to-digit
/// @requires {function} str-is-number
/// @requires {function} str-first
/// @param {mixed} $value - Some numeric value
/// @returns {boolean}
@function is-negative( $value ) {
  
  @if( is-number($value) ) {
    
    $unit: extract-unit($value);
    
    @return $value < (0 + unit-to-digit($unit));
    
  }
  
  @else if( is-string( $value ) ) {
    
    @if( str-is-number($value) ) {
      
      @return if( str-first($value) == '-', true, false );
      
    }
      
    @return false;
    
  }
  
  @return false;
  
}

/// Determines if a value is equivalent to a positive number
///
/// @requires {function} is-number
/// @requires {function} is-string
/// @requires {function} unit-to-digit
/// @requires {function} str-is-number
/// @param {mixed} $value - Some numeric value
/// @returns {boolean}
@function is-positive( $value ) {
  
  @if( is-number($value) ) {
    
    $unit: extract-unit($value);
    
    @return $value >= (0 + unit-to-digit($unit));
    
  }
  
  @else if( is-string( $value ) ) {
    
    @if( str-is-number($value) ) {
      
      @return if( str-slice($value, 1, 1) == '-', false, true );
      
    }
      
    @return false;
    
  }
  
  @return false;
  
}

/// Determines if a value is equal to zero
///
/// @requires {function} is-number
/// @requires {function} is-string
/// @requires {function} str-is-number
/// @requires {function} strip-unit
/// @requires {function} cast-number
/// @param {mixed} $value - Some numeric value
/// @returns {boolean}
@function is-zero( $value ) {
  
  @if( is-string($value) and str-is-number($value) ) { $value: cast-number($value); }
  
  @if( is-number($value) ) {
    
    $unit: extract-unit($value);
    
    @return strip-unit($value) == 0;
    
  }
  
  @return false;
  
}

/// Extracts the units from a numeric value
///
/// @requires {function} is-string
/// @requires {function} is-number
/// @requires {function} str-is-number
/// @requires {function} cast-number
/// @param {mixed} $value - Some numeric value
/// @returns {string | null}
/// @throws 'Value `#{$value}` is non-numeric for `extract-unit`.'
@function extract-unit( $value ) {
  
  @if( is-string($value) and str-is-number($value) ) { $value: cast-number($value); }
  
  @if( is-number($value) ) { @return unit($value); }
  
  @else {
  
    @warn 'Cannot execute `extract-unit` on non-numeric value `#{$value}`';
  
    @return null;
    
  }
  
}

/// Determines if a number is an integer
///
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-integer( $value ) { @return is-number($value) and $value % 1 == 0; }

/// Determines if a number is a float
///
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-float( $value ) { @return is-number($value) and $value % 1 != 0; }

/// Determines if a number is a percentage
///
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-percentage( $value ) { @return is-number($value) and unit($value) == '%'; }

/// Determines if a number is a percentage
///
/// @alias is-percentage
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-percent( $value ) { @return is-percentage($value); }

/// Determines if a number is even
///
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-even( $value ) { @return is-number($value) and $value % 2 == 0; }

/// Determines if a number is odd
///
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-integer( $value ) { @return is-number($value) and $value % 2 != 0; }

/// Determines if a number is an angle
///
/// @requires {function} is-number
/// @requires {function} contains
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-angle( $value ) { @return is-number($value) and contains('deg' 'rad' 'grad' 'turn', unit($value)); }

/// Determines if a number is an angle
///
/// @requires {function} is-number
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-frequency( $value ) { @return is-number($value) and contains('Hz' 'kHz', unit($value)); }

/// Determines if a number is a relative length
///
/// @requires {function} is-number
/// @requires {function} contains
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-relative-length( $value ) { @return is-number($value) and contains('em' 'ex' 'ch' 'rem' 'vw' 'vh' 'vmin' 'vmax', unit($value)); }

/// Determines if a number is an absolute length
///
/// @requires {function} is-number
/// @requires {function} contains
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-absolute-length( $value ) { @return is-number($value) and contains('cm' 'mm' 'in' 'px' 'pt' 'pc' 'pica', unit($value)); }

/// Determines if a number is a length
///
/// @requires {function} is-relative-length
/// @requires {function} is-absolute-length
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-length( $value ) { @return is-relative-length($value) or is-absolute-length($value); }

/// Determines if a number is a resolution
///
/// @requires {function} is-number
/// @requires {function} contains
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-resolution( $value ) { @return is-number($value) and contains('dpi' 'dpcm' 'dppx', unit($value)); }

/// Determines whether some value is a time
///
/// @requires {function} is-number
/// @requires {function} contains
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-time( $value ) { @return is-number($value) and contains('ms' 's', unit($value)); }

/// Determines whether some value is a duration
///
/// @alias is-time
/// @requires {function} is-time
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-duration( $value ) { @return is-time($value); }

/// Determines whether some value is equal to `NaN`
/// 
/// @requires {function} is-number
/// @requires {function} cast-string
/// @param {mixed} $value - Some value
/// @returns {boolean}
@function is-NaN( $value ) { @return is-number($value) and cast-string($value) == 'NaN'; }